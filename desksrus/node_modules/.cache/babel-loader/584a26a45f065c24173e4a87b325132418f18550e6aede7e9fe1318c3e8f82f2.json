{"ast":null,"code":"var _jsxFileName = \"/Users/hetpatel/Documents/NJIT/Fall '22/DMSD/Projects/desksrus/src/screens/StoreScreen/StoreScreen.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { useQuery } from 'react-query';\nimport Spinner from 'react-bootstrap/Spinner';\nimport Item from '../../components/Item/Item';\nimport './StoreScreen.css';\nimport CartDrawer from '../../components/CartDrawer/CartDrawer';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst getProducts = async () => await (await fetch('https://fakestoreapi.com/products')).json();\nconst StoreScreen = _ref => {\n  _s();\n  let {\n    setAuth\n  } = _ref;\n  const [cartOpen, setCartOpen] = useState(false);\n  const [cartItems, setCartItems] = useState([]);\n  const {\n    data,\n    isLoading,\n    error\n  } = useQuery('products', getProducts);\n  console.log(data);\n  const getTotalItems = items => items.reduce((acc, item) => acc + item.amount, 0);\n  const handleAddToCart = clickedItem => {\n    setCartItems(prev => {\n      const isItemInCart = prev.find(item => item.id === clickedItem.id);\n      if (isItemInCart) {\n        return prev.map(item => item.id === clickedItem.id ? {\n          ...item,\n          amount: item.amount + 1\n        } : item);\n      }\n      return [...prev, {\n        ...clickedItem,\n        amount: 1\n      }];\n    });\n  };\n  const handleRemoveFromCart = id => {\n    setCartItems(prev => {\n      return prev.reduce((acc, item) => {\n        if (item.id === id) {\n          if (item.amount === 1) return acc;\n          return [...acc, {\n            ...item,\n            amount: item.amount - 1\n          }];\n        } else {\n          return [...acc, item];\n        }\n      }, []);\n    });\n  };\n  if (isLoading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"d-flex justify-content-center align-items-center\",\n      style: {\n        height: '75vh'\n      },\n      children: /*#__PURE__*/_jsxDEV(Spinner, {\n        animation: \"border\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }, this);\n  }\n  if (error) return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: \"Something went wrong...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 68,\n    columnNumber: 21\n  }, this);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(CartDrawer, {\n      cartItems: cartItems\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card-layout\",\n      children: data === null || data === void 0 ? void 0 : data.map(item => /*#__PURE__*/_jsxDEV(Item, {\n        item: item,\n        handleAddToCart: handleAddToCart\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n_s(StoreScreen, \"sNjVdc7sEflwnqV2PP/uW1253TQ=\", false, function () {\n  return [useQuery];\n});\n_c = StoreScreen;\nexport default StoreScreen;\nvar _c;\n$RefreshReg$(_c, \"StoreScreen\");","map":{"version":3,"names":["React","useState","useQuery","Spinner","Item","CartDrawer","getProducts","fetch","json","StoreScreen","setAuth","cartOpen","setCartOpen","cartItems","setCartItems","data","isLoading","error","console","log","getTotalItems","items","reduce","acc","item","amount","handleAddToCart","clickedItem","prev","isItemInCart","find","id","map","handleRemoveFromCart","height"],"sources":["/Users/hetpatel/Documents/NJIT/Fall '22/DMSD/Projects/desksrus/src/screens/StoreScreen/StoreScreen.tsx"],"sourcesContent":["import React, { useState } from 'react'\nimport { useQuery } from 'react-query';\nimport Spinner from 'react-bootstrap/Spinner';\nimport Item from '../../components/Item/Item';\nimport './StoreScreen.css';\nimport CartDrawer from '../../components/CartDrawer/CartDrawer';\n\n\nexport type CartItemType = {\n  id: number;\n  category: string;\n  description: string;\n  image: string;\n  price: number;\n  title: string;\n  amount: number;\n}\n\ninterface Props {\n  setAuth: (isAuthenticated: boolean) => void;\n}\n\nconst getProducts = async (): Promise<CartItemType[]> => await (await fetch('https://fakestoreapi.com/products')).json();\n\nconst StoreScreen = ({ setAuth }: Props) => {\n  const [cartOpen, setCartOpen] = useState(false);\n  const [cartItems, setCartItems] = useState([] as CartItemType[]);\n  const { data, isLoading, error } = useQuery<CartItemType[]>('products', getProducts);\n  console.log(data);\n\n  const getTotalItems = (items: CartItemType[]) => items.reduce((acc: number, item) => acc + item.amount, 0);\n  const handleAddToCart = (clickedItem: CartItemType) => {\n    setCartItems(prev => {\n      const isItemInCart = prev.find(item => item.id === clickedItem.id);\n\n      if (isItemInCart) {\n        return prev.map(item =>\n          item.id === clickedItem.id\n            ? { ...item, amount: item.amount + 1 }\n            : item\n        );\n      }\n\n      return [...prev, { ...clickedItem, amount: 1 }];\n    })\n  };\n  const handleRemoveFromCart = (id: number) => {\n    setCartItems(prev => {\n      return prev.reduce((acc, item) => {\n        if (item.id === id) {\n          if (item.amount === 1)\n            return acc;\n          return [...acc, { ...item, amount: item.amount - 1 }];\n        } else {\n          return [...acc, item];\n        }\n      }, [] as CartItemType[]);\n    });\n  };\n\n  if (isLoading) {\n    return (\n      <div className='d-flex justify-content-center align-items-center' style={{ height: '75vh' }}>\n        <Spinner animation=\"border\" />\n      </div>\n    )\n  }\n  if (error) return <div>Something went wrong...</div>\n\n\n  return (\n    <>\n      <CartDrawer cartItems={cartItems}/>\n      <div className='card-layout'>\n        {data?.map(item => (\n          <Item item={item} handleAddToCart={handleAddToCart} />\n        ))}\n      </div>\n    </>\n  )\n}\n\nexport default StoreScreen;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}