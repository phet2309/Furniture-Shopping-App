{"ast":null,"code":"var _jsxFileName = \"/Users/hetpatel/Documents/NJIT/Fall '22/DMSD/Projects/desksrus/src/screens/StoreScreen/StoreScreen.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { useQuery } from 'react-query';\nimport Spinner from 'react-bootstrap/Spinner';\nimport Item from '../../components/Item/Item';\nimport './StoreScreen.css';\nimport { Drawer } from 'react-bootstrap-drawer';\nimport { Collapse } from 'react-bootstrap';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst getProducts = async () => await (await fetch('https://fakestoreapi.com/products')).json();\nconst StoreScreen = _ref => {\n  _s();\n  let {\n    setAuth\n  } = _ref;\n  const [cartOpen, setCartOpen] = useState(false);\n  const [cartItems, setCartItems] = useState([]);\n  const {\n    data,\n    isLoading,\n    error\n  } = useQuery('products', getProducts);\n  console.log(data);\n  const getTotalItems = items => items.reduce((acc, item) => acc + item.amount, 0);\n  const handleAddToCart = clickedItem => {\n    setCartItems(prev => {\n      const isItemInCart = prev.find(item => item.id === clickedItem.id);\n      if (isItemInCart) {\n        return prev.map(item => item.id === clickedItem.id ? {\n          ...item,\n          amount: item.amount + 1\n        } : item);\n      }\n      return [...prev, {\n        ...clickedItem,\n        amount: 1\n      }];\n    });\n  };\n  const handleRemoveFromCart = id => {\n    setCartItems(prev => {\n      return prev.reduce((acc, item) => {\n        if (item.id === id) {\n          if (item.amount === 1) return acc;\n          return [...acc, {\n            ...item,\n            amount: item.amount - 1\n          }];\n        } else {\n          return [...acc, item];\n        }\n      }, []);\n    });\n  };\n  if (isLoading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"d-flex justify-content-center align-items-center\",\n      style: {\n        height: '75vh'\n      },\n      children: /*#__PURE__*/_jsxDEV(Spinner, {\n        animation: \"border\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }, this);\n  }\n  if (error) return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: \"Something went wrong...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 69,\n    columnNumber: 20\n  }, this);\n  const handleToggle = () => setCartOpen(!cartOpen);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Drawer, {\n      children: [/*#__PURE__*/_jsxDEV(Drawer.Toggle, {\n        onClick: handleToggle\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 4\n      }, this), /*#__PURE__*/_jsxDEV(Collapse, {\n        children: /*#__PURE__*/_jsxDEV(Drawer.Overflow, {\n          children: /*#__PURE__*/_jsxDEV(Drawer.ToC, {\n            children: [/*#__PURE__*/_jsxDEV(Drawer.Header, {\n              href: \"/\",\n              children: \"Application\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 81,\n              columnNumber: 7\n            }, this), /*#__PURE__*/_jsxDEV(Drawer.Nav, {\n              children: /*#__PURE__*/_jsxDEV(Drawer.Item, {\n                href: \"/settings\",\n                children: \"Settings\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 84,\n                columnNumber: 8\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 83,\n              columnNumber: 7\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 6\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 5\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 4\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card-layout\",\n      children: data === null || data === void 0 ? void 0 : data.map(item => /*#__PURE__*/_jsxDEV(Item, {\n        item: item,\n        handleAddToCart: handleAddToCart\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 5\n    }, this)]\n  }, void 0, true);\n};\n_s(StoreScreen, \"omAssJZsGI9OQ5r9YkIpl/j1bVU=\", false, function () {\n  return [useQuery];\n});\n_c = StoreScreen;\nexport default StoreScreen;\nvar _c;\n$RefreshReg$(_c, \"StoreScreen\");","map":{"version":3,"names":["React","useState","useQuery","Spinner","Item","Drawer","Collapse","getProducts","fetch","json","StoreScreen","setAuth","cartOpen","setCartOpen","cartItems","setCartItems","data","isLoading","error","console","log","getTotalItems","items","reduce","acc","item","amount","handleAddToCart","clickedItem","prev","isItemInCart","find","id","map","handleRemoveFromCart","height","handleToggle"],"sources":["/Users/hetpatel/Documents/NJIT/Fall '22/DMSD/Projects/desksrus/src/screens/StoreScreen/StoreScreen.tsx"],"sourcesContent":["import React, { useState } from 'react'\nimport { useQuery } from 'react-query';\nimport Spinner from 'react-bootstrap/Spinner';\nimport Item from '../../components/Item/Item';\nimport './StoreScreen.css';\nimport { Drawer, DrawerNavigation, DrawerNavigationHeader } from 'react-bootstrap-drawer';\nimport { Collapse } from 'react-bootstrap';\n\n\nexport type CartItemType = {\n  id: number;\n  category: string;\n  description: string;\n  image: string;\n  price: number;\n  title: string;\n  amount: number;\n}\n\ninterface Props {\n  setAuth: (isAuthenticated : boolean) => void;\n}\n\nconst getProducts = async (): Promise<CartItemType[]> => await (await fetch('https://fakestoreapi.com/products')).json();\n\nconst StoreScreen = ({ setAuth }: Props) => {\n  const [cartOpen, setCartOpen] = useState(false);\n  const [cartItems, setCartItems] = useState([] as CartItemType[]);\n  const {data, isLoading, error} = useQuery<CartItemType[]>('products', getProducts);\n  console.log(data);\n\n  const getTotalItems = (items : CartItemType[]) => items.reduce((acc: number, item) => acc + item.amount, 0);\n  const handleAddToCart = (clickedItem : CartItemType) => {\n    setCartItems(prev => {\n      const isItemInCart = prev.find(item => item.id === clickedItem.id);\n\n      if (isItemInCart) {\n        return prev.map(item =>\n          item.id === clickedItem.id\n            ? { ...item, amount: item.amount + 1 }\n            : item\n        );\n      }\n\n      return [...prev, { ...clickedItem, amount: 1 }];\n    })\n  };\n  const handleRemoveFromCart = (id: number) => {\n    setCartItems(prev => {\n      return prev.reduce((acc, item) => {\n        if (item.id === id) {\n          if (item.amount === 1)\n            return acc;\n          return [...acc, { ...item, amount: item.amount - 1 }];\n        } else {\n          return [...acc, item];\n        }\n      }, [] as CartItemType[]);\n    });\n  };\n\n  if(isLoading) {\n    return (\n      <div className='d-flex justify-content-center align-items-center' style={{height: '75vh'}}>\n        <Spinner animation=\"border\" />\n      </div>\n    )\n  } \n  if(error) return <div>Something went wrong...</div>\n\n  const handleToggle = () => setCartOpen(!cartOpen);\n\n  return ( \n  <>\n    <Drawer>\n\t\t\t<Drawer.Toggle onClick={ handleToggle } />\n\n\t\t\t<Collapse>\n\t\t\t\t<Drawer.Overflow>\n\t\t\t\t\t<Drawer.ToC>\n\t\t\t\t\t\t<Drawer.Header href=\"/\">Application</Drawer.Header>\n\n\t\t\t\t\t\t<Drawer.Nav>\n\t\t\t\t\t\t\t<Drawer.Item href=\"/settings\">Settings</Drawer.Item>\n\t\t\t\t\t\t</Drawer.Nav>\n\t\t\t\t\t</Drawer.ToC>\n\t\t\t\t</Drawer.Overflow>\n\t\t\t</Collapse>\n\t\t</Drawer>\n    {/* <Drawer anchor='right' open={cartOpen} onClose={() => setCartOpen(false)}>\n        <Cart\n          cartItems={cartItems}\n          addToCart={handleAddToCart}\n          removeFromCart={handleRemoveFromCart}\n        />\n      </Drawer>\n      <StyledButton onClick={() => setCartOpen(true)}>\n        <Badge badgeContent={getTotalItems(cartItems)} color='error'>\n          <AddShoppingCartIcon />\n        </Badge>\n      </StyledButton> */}\n    <div className='card-layout'>\n      {data?.map(item => (\n          <Item item={item} handleAddToCart={handleAddToCart} />\n      ))}\n    </div>\n  </>\n  )\n}\n\nexport default StoreScreen;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}