{"ast":null,"code":"var _jsxFileName = \"/Users/hetpatel/Documents/NJIT/Fall '22/DMSD/Projects/desksrus/src/screens/StoreScreen/StoreScreen.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { useQuery } from 'react-query';\nimport Spinner from 'react-bootstrap/Spinner';\nimport Item from '../../components/Item/Item';\nimport './StoreScreen.css';\nimport { Button, Offcanvas } from 'react-bootstrap';\nimport CartItem from '../../components/CartItem/CartItem';\nimport { Link } from 'react-router-dom';\nimport CheckoutScreen from '../CheckoutScreen/CheckoutScreen';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst getProducts = async () => await (await fetch('https://fakestoreapi.com/products')).json();\nconst StoreScreen = _ref => {\n  _s();\n  let {\n    setAuth\n  } = _ref;\n  const [cartOpen, setCartOpen] = useState(false);\n  const [cartItems, setCartItems] = useState([]);\n  const {\n    data,\n    isLoading,\n    error\n  } = useQuery('products', getProducts);\n  console.log(data);\n  const getTotalItems = items => items.reduce((acc, item) => acc + item.amount, 0);\n  const handleAddToCart = clickedItem => {\n    setCartItems(prev => {\n      const isItemInCart = prev.find(item => item.id === clickedItem.id);\n      if (isItemInCart) {\n        return prev.map(item => item.id === clickedItem.id ? {\n          ...item,\n          amount: item.amount + 1\n        } : item);\n      }\n      return [...prev, {\n        ...clickedItem,\n        amount: 1\n      }];\n    });\n  };\n  const handleRemoveFromCart = id => {\n    setCartItems(prev => {\n      return prev.reduce((acc, item) => {\n        if (item.id === id) {\n          if (item.amount === 1) return acc;\n          return [...acc, {\n            ...item,\n            amount: item.amount - 1\n          }];\n        } else {\n          return [...acc, item];\n        }\n      }, []);\n    });\n  };\n  const checkOutHandler = (e, cartItems) => {\n    debugger;\n    return /*#__PURE__*/_jsxDEV(Link, {\n      to: \"/transactions\",\n      render: () => /*#__PURE__*/_jsxDEV(CheckoutScreen, {\n        cartItems: cartItems,\n        setAuth: setAuth\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 44\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 5\n    }, this);\n  };\n  const handleCloseCart = () => {\n    // close the cart\n    setCartOpen(false);\n  };\n  if (isLoading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"d-flex justify-content-center align-items-center\",\n      style: {\n        height: '75vh'\n      },\n      children: /*#__PURE__*/_jsxDEV(Spinner, {\n        animation: \"border\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }, this);\n  }\n  if (error) return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: \"Something went wrong...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 85,\n    columnNumber: 21\n  }, this);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Button, {\n      variant: \"primary\",\n      onClick: () => setCartOpen(true),\n      children: \"Go to Cart\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Offcanvas, {\n      show: cartOpen,\n      onHide: handleCloseCart,\n      children: [/*#__PURE__*/_jsxDEV(Offcanvas.Header, {\n        closeButton: true,\n        children: /*#__PURE__*/_jsxDEV(Offcanvas.Title, {\n          children: \"Shopping Cart\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Offcanvas.Body, {\n        children: [cartItems.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"No items in cart.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 37\n        }, this) : null, cartItems.map(item => /*#__PURE__*/_jsxDEV(CartItem, {\n          item: item,\n          addToCart: handleAddToCart,\n          removeFromCart: handleRemoveFromCart\n        }, item.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 13\n        }, this)), /*#__PURE__*/_jsxDEV(\"h2\", {\n          children: [\"Total: $\", getTotalItems(cartItems).toFixed(2)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n          children: cartItems.map(item => /*#__PURE__*/_jsxDEV(\"li\", {\n            children: [item.title, \" (\", item.amount, \") - $\", item.price * item.amount]\n          }, item.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 110,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"dark\",\n          disabled: cartItems.length === 0,\n          onClick: e => checkOutHandler(e, cartItems),\n          children: \"Checkout\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card-layout\",\n      children: data === null || data === void 0 ? void 0 : data.map(item => /*#__PURE__*/_jsxDEV(Item, {\n        item: item,\n        handleAddToCart: handleAddToCart\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n_s(StoreScreen, \"sNjVdc7sEflwnqV2PP/uW1253TQ=\", false, function () {\n  return [useQuery];\n});\n_c = StoreScreen;\nexport default StoreScreen;\nvar _c;\n$RefreshReg$(_c, \"StoreScreen\");","map":{"version":3,"names":["React","useState","useQuery","Spinner","Item","Button","Offcanvas","CartItem","Link","CheckoutScreen","getProducts","fetch","json","StoreScreen","setAuth","cartOpen","setCartOpen","cartItems","setCartItems","data","isLoading","error","console","log","getTotalItems","items","reduce","acc","item","amount","handleAddToCart","clickedItem","prev","isItemInCart","find","id","map","handleRemoveFromCart","checkOutHandler","e","handleCloseCart","height","length","toFixed","title","price"],"sources":["/Users/hetpatel/Documents/NJIT/Fall '22/DMSD/Projects/desksrus/src/screens/StoreScreen/StoreScreen.tsx"],"sourcesContent":["import React, { SyntheticEvent, useState } from 'react'\nimport { useQuery } from 'react-query';\nimport Spinner from 'react-bootstrap/Spinner';\nimport Item from '../../components/Item/Item';\nimport './StoreScreen.css';\nimport { Drawer } from 'react-bootstrap-drawer';\nimport { Button, Offcanvas } from 'react-bootstrap';\nimport CartItem from '../../components/CartItem/CartItem';\nimport { Link } from 'react-router-dom';\nimport CheckoutScreen from '../CheckoutScreen/CheckoutScreen';\n\n\nexport type CartItemType = {\n  id: number;\n  category: string;\n  description: string;\n  image: string;\n  price: number;\n  title: string;\n  amount: number;\n}\n\ninterface Props {\n  setAuth: (isAuthenticated: boolean) => void;\n}\n\nconst getProducts = async (): Promise<CartItemType[]> => await (await fetch('https://fakestoreapi.com/products')).json();\n\nconst StoreScreen = ({ setAuth }: Props) => {\n  const [cartOpen, setCartOpen] = useState(false);\n  const [cartItems, setCartItems] = useState([] as CartItemType[]);\n  const { data, isLoading, error } = useQuery<CartItemType[]>('products', getProducts);\n  console.log(data);\n\n  const getTotalItems = (items: CartItemType[]) => items.reduce((acc: number, item) => acc + item.amount, 0);\n  const handleAddToCart = (clickedItem: CartItemType) => {\n    setCartItems(prev => {\n      const isItemInCart = prev.find(item => item.id === clickedItem.id);\n\n      if (isItemInCart) {\n        return prev.map(item =>\n          item.id === clickedItem.id\n            ? { ...item, amount: item.amount + 1 }\n            : item\n        );\n      }\n\n      return [...prev, { ...clickedItem, amount: 1 }];\n    })\n  };\n  const handleRemoveFromCart = (id: number) => {\n    setCartItems(prev => {\n      return prev.reduce((acc, item) => {\n        if (item.id === id) {\n          if (item.amount === 1)\n            return acc;\n          return [...acc, { ...item, amount: item.amount - 1 }];\n        } else {\n          return [...acc, item];\n        }\n      }, [] as CartItemType[]);\n    });\n  };\n\n  const checkOutHandler = (e: SyntheticEvent, cartItems: CartItemType[]) => {\n    debugger;\n    return (\n    <Link to='/transactions' render={() => <CheckoutScreen cartItems={cartItems} setAuth={setAuth}/>} />\n    );\n  }\n\n\n  const handleCloseCart = () => {\n    // close the cart\n    setCartOpen(false);\n  };\n\n  if (isLoading) {\n    return (\n      <div className='d-flex justify-content-center align-items-center' style={{ height: '75vh' }}>\n        <Spinner animation=\"border\" />\n      </div>\n    )\n  }\n  if (error) return <div>Something went wrong...</div>\n\n\n  return (\n    <>\n      <Button variant=\"primary\" onClick={() => setCartOpen(true)}>\n        Go to Cart\n      </Button>\n      <Offcanvas show={cartOpen} onHide={handleCloseCart}>\n        <Offcanvas.Header closeButton>\n          <Offcanvas.Title>Shopping Cart</Offcanvas.Title>\n        </Offcanvas.Header>\n        <Offcanvas.Body>\n          {cartItems.length === 0 ? <p>No items in cart.</p> : null}\n          {cartItems.map(item => (\n            <CartItem\n              key={item.id}\n              item={item}\n              addToCart={handleAddToCart}\n              removeFromCart={handleRemoveFromCart}\n            />\n          ))}\n          <h2>Total: ${getTotalItems(cartItems).toFixed(2)}</h2>\n          <ul>\n            {cartItems.map(item => (\n              <li key={item.id}>\n                {item.title} ({item.amount}) - ${item.price * item.amount}\n              </li>\n            ))}\n          </ul>\n          <Button variant=\"dark\" disabled={cartItems.length === 0} onClick={(e) => checkOutHandler(e, cartItems)}>Checkout</Button>\n        </Offcanvas.Body>\n\n      </Offcanvas>\n      <div className='card-layout'>\n        {data?.map(item => (\n          <Item item={item} handleAddToCart={handleAddToCart} />\n        ))}\n      </div>\n    </>\n  )\n}\n\nexport default StoreScreen;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}